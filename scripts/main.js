!function(){"use strict";angular.module("tiy-gradebook",["ui.router","restangular"]).run(["$rootScope",function(t){t.$on("$stateChangeError",function(){console.log("$stateChangeError",arguments)})}]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("classes",{"abstract":!0,resolve:{authd:["Auth",function(t){return t.isGuest()&&t.login()}]}}).state("classes.list",{url:"/",templateUrl:"views/classes.html",controller:"ClassList as org"}).state("classes.detail",{url:"/:repo",templateUrl:"views/class.html",controller:"ClassDetail as class"}),e.otherwise("/")}]).constant("API",{base:"https://api.github.com/",org:"TheIronYard--Orlando"}).factory("hello",function(){return hello.init({github:"57e761493a1d9a2f767a"})("github")}).factory("Auth",["$q","hello","Github",function(t,e,n){var o={};return{isGuest:function(){return!Boolean(o.id)},login:function(){var s=t.defer();return e.login().then(function(t){n.setDefaultRequestParams({access_token:t.authResponse.access_token}),e.api("me").then(function(t){s.resolve(angular.extend(o,t))})}),s.promise},logout:function(){return t(e.logout().then)},me:function(){return o}}}]).factory("Github",["Restangular","API",function(t,e){return t.withConfig(function(t){t.setBaseUrl(e.base).setRequestSuffix(e.suffix).extendCollection("classes",function(t){return t.fromServer?_(t).filter(function(t){return t.name.match(/(FEE|ROR|iOS)/)}).sortByOrder("updated_at",!1).value():t}).extendCollection("issues",function(t){return angular.extend(t,_.groupBy(t,function(t){return _.pluck(t.labels,"name").toString()||"none"}),{total:t.length})}).extendCollection("labels",function(t){return _.filter(t,function(t){return"Attendance"!==t.name})})})}]).controller("ClassList",["Github","API",function(t,e){this.repos=t.allUrl("classes",e.base+"orgs/"+e.org+"/repos").getList().$object}]).controller("ClassDetail",["Github","API","$stateParams",function(t,e,n){var o=t.one("repos",e.org).one(n.repo);this.repo=o.get().$object,t.extendModel("milestones",function(t){return t.issues=o.getList("issues",{state:"all",milestone:t.number}).$object,t}),this.milestones=o.getList("milestones",{state:"all"}).$object,this.labels=o.getList("labels").$object,this.percentOfType=function(t,e){return t&&t[e]?t[e].length/t.length*100:0}}]).controller("AssignmentList",function(){}).controller("AssignmentDetail",function(){}).controller("StudentList",function(){})}();